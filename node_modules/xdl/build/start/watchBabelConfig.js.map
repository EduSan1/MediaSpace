{"version":3,"file":"watchBabelConfig.js","names":["watchingFiles","getProjectBabelConfigFile","projectRoot","resolveFrom","silent","watchBabelConfigForProject","configPath","watchBabelConfig","includes","push","configName","path","relative","watchFile","cur","prev","size","ProjectUtils","logInfo","chalk","bold"],"sources":["../../src/start/watchBabelConfig.ts"],"sourcesContent":["import chalk from 'chalk';\nimport { watchFile } from 'fs';\nimport path from 'path';\nimport resolveFrom from 'resolve-from';\n\nimport { ProjectUtils } from '../internal';\n\n// List of files that are being observed.\nconst watchingFiles: string[] = [];\n\n/**\n * Get the babel configuration file for the project.\n */\nexport function getProjectBabelConfigFile(projectRoot: string): string | undefined {\n  return (\n    resolveFrom.silent(projectRoot, './babel.config.js') ||\n    resolveFrom.silent(projectRoot, './.babelrc') ||\n    resolveFrom.silent(projectRoot, './.babelrc.js')\n  );\n}\n\nexport function watchBabelConfigForProject(projectRoot: string) {\n  const configPath = getProjectBabelConfigFile(projectRoot);\n  if (configPath) {\n    return watchBabelConfig(projectRoot, configPath);\n  }\n  return configPath;\n}\n\n/**\n * Watch the babel configuration file and warn to reload the CLI if it changes.\n */\nexport function watchBabelConfig(projectRoot: string, configPath: string): void {\n  if (watchingFiles.includes(configPath)) {\n    return;\n  }\n\n  watchingFiles.push(configPath);\n  const configName = path.relative(projectRoot, configPath);\n  watchFile(configPath, (cur: any, prev: any) => {\n    if (prev.size || cur.size) {\n      ProjectUtils.logInfo(\n        projectRoot,\n        'expo',\n        `\\u203A Detected a change in ${chalk.bold(\n          configName\n        )}. Restart the server to see the new results.`\n      );\n    }\n  });\n}\n"],"mappings":";;;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAEA;AACA,MAAMA,aAAuB,GAAG,EAAhC;AAEA;AACA;AACA;;AACO,SAASC,yBAAT,CAAmCC,WAAnC,EAA4E;EACjF,OACEC,sBAAA,CAAYC,MAAZ,CAAmBF,WAAnB,EAAgC,mBAAhC,KACAC,sBAAA,CAAYC,MAAZ,CAAmBF,WAAnB,EAAgC,YAAhC,CADA,IAEAC,sBAAA,CAAYC,MAAZ,CAAmBF,WAAnB,EAAgC,eAAhC,CAHF;AAKD;;AAEM,SAASG,0BAAT,CAAoCH,WAApC,EAAyD;EAC9D,MAAMI,UAAU,GAAGL,yBAAyB,CAACC,WAAD,CAA5C;;EACA,IAAII,UAAJ,EAAgB;IACd,OAAOC,gBAAgB,CAACL,WAAD,EAAcI,UAAd,CAAvB;EACD;;EACD,OAAOA,UAAP;AACD;AAED;AACA;AACA;;;AACO,SAASC,gBAAT,CAA0BL,WAA1B,EAA+CI,UAA/C,EAAyE;EAC9E,IAAIN,aAAa,CAACQ,QAAd,CAAuBF,UAAvB,CAAJ,EAAwC;IACtC;EACD;;EAEDN,aAAa,CAACS,IAAd,CAAmBH,UAAnB;;EACA,MAAMI,UAAU,GAAGC,eAAA,CAAKC,QAAL,CAAcV,WAAd,EAA2BI,UAA3B,CAAnB;;EACA,IAAAO,eAAA,EAAUP,UAAV,EAAsB,CAACQ,GAAD,EAAWC,IAAX,KAAyB;IAC7C,IAAIA,IAAI,CAACC,IAAL,IAAaF,GAAG,CAACE,IAArB,EAA2B;MACzBC,wBAAA,CAAaC,OAAb,CACEhB,WADF,EAEE,MAFF,EAGG,+BAA8BiB,gBAAA,CAAMC,IAAN,CAC7BV,UAD6B,CAE7B,8CALJ;IAOD;EACF,CAVD;AAWD"}