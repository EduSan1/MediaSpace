{"version":3,"file":"waitForActionAsync.js","names":["TimeoutError","Error","waitForActionAsync","action","interval","maxWaitTime","complete","start","Date","now","delayAsync"],"sources":["../../../src/apple/utils/waitForActionAsync.ts"],"sourcesContent":["import { delayAsync } from '../../utils/delayAsync';\n\nexport class TimeoutError extends Error {}\n\nexport async function waitForActionAsync<T>({\n  action,\n  interval = 100,\n  maxWaitTime = 20000,\n}: {\n  action: () => T | Promise<T>;\n  interval?: number;\n  maxWaitTime?: number;\n}): Promise<T> {\n  let complete: T;\n  const start = Date.now();\n  do {\n    complete = await action();\n\n    await delayAsync(interval);\n    if (Date.now() - start > maxWaitTime) {\n      break;\n    }\n  } while (!complete);\n\n  return complete;\n}\n"],"mappings":";;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEO,MAAMA,YAAN,SAA2BC,KAA3B,CAAiC;;;;AAEjC,eAAeC,kBAAf,CAAqC;EAC1CC,MAD0C;EAE1CC,QAAQ,GAAG,GAF+B;EAG1CC,WAAW,GAAG;AAH4B,CAArC,EAQQ;EACb,IAAIC,QAAJ;EACA,MAAMC,KAAK,GAAGC,IAAI,CAACC,GAAL,EAAd;;EACA,GAAG;IACDH,QAAQ,GAAG,MAAMH,MAAM,EAAvB;IAEA,MAAM,IAAAO,wBAAA,EAAWN,QAAX,CAAN;;IACA,IAAII,IAAI,CAACC,GAAL,KAAaF,KAAb,GAAqBF,WAAzB,EAAsC;MACpC;IACD;EACF,CAPD,QAOS,CAACC,QAPV;;EASA,OAAOA,QAAP;AACD"}