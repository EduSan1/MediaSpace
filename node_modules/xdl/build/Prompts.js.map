{"version":3,"file":"Prompts.js","names":["listeners","addInteractionListener","callback","push","removeInteractionListener","listenerIndex","findIndex","_callback","Error","splice","pauseInteractions","options","listener","pause","resumeInteractions","confirmAsync","value","prompts","type","name"],"sources":["../src/Prompts.ts"],"sourcesContent":["import prompts from 'prompts';\n\ntype InteractionOptions = { pause: boolean; canEscape?: boolean };\n\ntype InteractionCallback = (options: InteractionOptions) => void;\n\nconst listeners: InteractionCallback[] = [];\n\n/**\n * Used to pause/resume interaction observers while prompting (made for TerminalUI).\n *\n * @param callback\n */\nexport function addInteractionListener(callback: InteractionCallback) {\n  listeners.push(callback);\n}\n\nexport function removeInteractionListener(callback: InteractionCallback) {\n  const listenerIndex = listeners.findIndex(_callback => _callback === callback);\n  if (listenerIndex === -1) {\n    throw new Error(\n      'Logger.removeInteractionListener(): cannot remove an unregistered event listener.'\n    );\n  }\n  listeners.splice(listenerIndex, 1);\n}\n\nexport function pauseInteractions(options: Omit<InteractionOptions, 'pause'> = {}) {\n  for (const listener of listeners) {\n    listener({ pause: true, ...options });\n  }\n}\n\nexport function resumeInteractions(options: Omit<InteractionOptions, 'pause'> = {}) {\n  for (const listener of listeners) {\n    listener({ pause: false, ...options });\n  }\n}\n\nexport async function confirmAsync(options: {\n  initial?: boolean;\n  message: string;\n}): Promise<boolean> {\n  pauseInteractions();\n  const { value } = await prompts({\n    type: 'confirm',\n    name: 'value',\n    ...options,\n  });\n  resumeInteractions();\n  return value;\n}\n"],"mappings":";;;;;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAMA,MAAMA,SAAgC,GAAG,EAAzC;AAEA;AACA;AACA;AACA;AACA;;AACO,SAASC,sBAAT,CAAgCC,QAAhC,EAA+D;EACpEF,SAAS,CAACG,IAAV,CAAeD,QAAf;AACD;;AAEM,SAASE,yBAAT,CAAmCF,QAAnC,EAAkE;EACvE,MAAMG,aAAa,GAAGL,SAAS,CAACM,SAAV,CAAoBC,SAAS,IAAIA,SAAS,KAAKL,QAA/C,CAAtB;;EACA,IAAIG,aAAa,KAAK,CAAC,CAAvB,EAA0B;IACxB,MAAM,IAAIG,KAAJ,CACJ,mFADI,CAAN;EAGD;;EACDR,SAAS,CAACS,MAAV,CAAiBJ,aAAjB,EAAgC,CAAhC;AACD;;AAEM,SAASK,iBAAT,CAA2BC,OAA0C,GAAG,EAAxE,EAA4E;EACjF,KAAK,MAAMC,QAAX,IAAuBZ,SAAvB,EAAkC;IAChCY,QAAQ,CAAC;MAAEC,KAAK,EAAE,IAAT;MAAe,GAAGF;IAAlB,CAAD,CAAR;EACD;AACF;;AAEM,SAASG,kBAAT,CAA4BH,OAA0C,GAAG,EAAzE,EAA6E;EAClF,KAAK,MAAMC,QAAX,IAAuBZ,SAAvB,EAAkC;IAChCY,QAAQ,CAAC;MAAEC,KAAK,EAAE,KAAT;MAAgB,GAAGF;IAAnB,CAAD,CAAR;EACD;AACF;;AAEM,eAAeI,YAAf,CAA4BJ,OAA5B,EAGc;EACnBD,iBAAiB;EACjB,MAAM;IAAEM;EAAF,IAAY,MAAM,IAAAC,kBAAA,EAAQ;IAC9BC,IAAI,EAAE,SADwB;IAE9BC,IAAI,EAAE,OAFwB;IAG9B,GAAGR;EAH2B,CAAR,CAAxB;EAKAG,kBAAkB;EAClB,OAAOE,KAAP;AACD"}