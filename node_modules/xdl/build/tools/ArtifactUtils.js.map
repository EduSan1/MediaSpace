{"version":3,"file":"ArtifactUtils.js","names":["writeArtifactSafelyAsync","projectRoot","keyName","artifactPath","artifact","pathToWrite","path","resolve","fs","existsSync","dirname","errorMsg","logger","global","warn","writeFile"],"sources":["../../src/tools/ArtifactUtils.ts"],"sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\n\nimport { Logger as logger } from '../internal';\n\nexport async function writeArtifactSafelyAsync(\n  projectRoot: string,\n  keyName: string | null,\n  artifactPath: string,\n  artifact: string | Uint8Array\n) {\n  const pathToWrite = path.resolve(projectRoot, artifactPath);\n  if (!fs.existsSync(path.dirname(pathToWrite))) {\n    const errorMsg = keyName\n      ? `app.json specifies: ${pathToWrite}, but that directory does not exist.`\n      : `app.json specifies ${keyName}: ${pathToWrite}, but that directory does not exist.`;\n    logger.global.warn(errorMsg);\n  } else {\n    await fs.writeFile(pathToWrite, artifact);\n  }\n}\n"],"mappings":";;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAEO,eAAeA,wBAAf,CACLC,WADK,EAELC,OAFK,EAGLC,YAHK,EAILC,QAJK,EAKL;EACA,MAAMC,WAAW,GAAGC,eAAA,CAAKC,OAAL,CAAaN,WAAb,EAA0BE,YAA1B,CAApB;;EACA,IAAI,CAACK,kBAAA,CAAGC,UAAH,CAAcH,eAAA,CAAKI,OAAL,CAAaL,WAAb,CAAd,CAAL,EAA+C;IAC7C,MAAMM,QAAQ,GAAGT,OAAO,GACnB,uBAAsBG,WAAY,sCADf,GAEnB,sBAAqBH,OAAQ,KAAIG,WAAY,sCAFlD;;IAGAO,kBAAA,CAAOC,MAAP,CAAcC,IAAd,CAAmBH,QAAnB;EACD,CALD,MAKO;IACL,MAAMH,kBAAA,CAAGO,SAAH,CAAaV,WAAb,EAA0BD,QAA1B,CAAN;EACD;AACF"}