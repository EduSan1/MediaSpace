{"version":3,"file":"profileMethod.js","names":["profileMethod","fn","functionName","name","chalk","dim","args","Log","time","results","Promise","resolve","reject","then","timeEnd","catch","error"],"sources":["../../../src/commands/utils/profileMethod.ts"],"sourcesContent":["import chalk from 'chalk';\n\nimport Log from '../../log';\n\n/**\n * Wrap a method and profile the time it takes to execute the method using `EXPO_PROFILE`.\n * Works best with named functions (i.e. not arrow functions).\n *\n * @param fn\n * @param functionName\n */\nexport const profileMethod = <T extends any[], U>(fn: (...args: T) => U, functionName?: string) => {\n  const name = chalk.dim(`⏱  [profile] ${functionName ?? (fn.name || 'unknown')}`);\n  return (...args: T): U => {\n    Log.time(name);\n    const results = fn(...args);\n    if (results instanceof Promise) {\n      // @ts-ignore\n      return new Promise<U>((resolve, reject) => {\n        results\n          .then(results => {\n            resolve(results);\n            Log.timeEnd(name);\n          })\n          .catch(error => {\n            reject(error);\n            Log.timeEnd(name);\n          });\n      });\n    } else {\n      Log.timeEnd(name);\n    }\n    return results;\n  };\n};\n"],"mappings":";;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMA,aAAa,GAAG,CAAqBC,EAArB,EAA4CC,YAA5C,KAAsE;EACjG,MAAMC,IAAI,GAAGC,gBAAA,CAAMC,GAAN,CAAW,gBAAeH,YAAhB,aAAgBA,YAAhB,cAAgBA,YAAhB,GAAiCD,EAAE,CAACE,IAAH,IAAW,SAAW,EAAjE,CAAb;;EACA,OAAO,CAAC,GAAGG,IAAJ,KAAmB;IACxBC,cAAA,CAAIC,IAAJ,CAASL,IAAT;;IACA,MAAMM,OAAO,GAAGR,EAAE,CAAC,GAAGK,IAAJ,CAAlB;;IACA,IAAIG,OAAO,YAAYC,OAAvB,EAAgC;MAC9B;MACA,OAAO,IAAIA,OAAJ,CAAe,CAACC,OAAD,EAAUC,MAAV,KAAqB;QACzCH,OAAO,CACJI,IADH,CACQJ,OAAO,IAAI;UACfE,OAAO,CAACF,OAAD,CAAP;;UACAF,cAAA,CAAIO,OAAJ,CAAYX,IAAZ;QACD,CAJH,EAKGY,KALH,CAKSC,KAAK,IAAI;UACdJ,MAAM,CAACI,KAAD,CAAN;;UACAT,cAAA,CAAIO,OAAJ,CAAYX,IAAZ;QACD,CARH;MASD,CAVM,CAAP;IAWD,CAbD,MAaO;MACLI,cAAA,CAAIO,OAAJ,CAAYX,IAAZ;IACD;;IACD,OAAOM,OAAP;EACD,CApBD;AAqBD,CAvBM"}