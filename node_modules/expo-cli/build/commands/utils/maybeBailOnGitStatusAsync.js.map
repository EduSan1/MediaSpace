{"version":3,"file":"maybeBailOnGitStatusAsync.js","names":["EXPO_NO_GIT_STATUS","boolish","maybeBailOnGitStatusAsync","Log","warn","isGitStatusClean","validateGitStatusAsync","program","nonInteractive","addNewLineIfNone","answer","confirmAsync","message","newLine"],"sources":["../../../src/commands/utils/maybeBailOnGitStatusAsync.ts"],"sourcesContent":["import program from 'commander';\nimport { boolish } from 'getenv';\n\nimport Log from '../../log';\nimport { confirmAsync } from '../../utils/prompts';\nimport { validateGitStatusAsync } from './ProjectUtils';\n\nconst EXPO_NO_GIT_STATUS = boolish('EXPO_NO_GIT_STATUS', false);\n\nexport default async function maybeBailOnGitStatusAsync(): Promise<boolean> {\n  if (EXPO_NO_GIT_STATUS) {\n    Log.warn(\n      'Git status is dirty but the command will continue because EXPO_NO_GIT_STATUS is enabled...'\n    );\n    return false;\n  }\n  const isGitStatusClean = await validateGitStatusAsync();\n\n  // Give people a chance to bail out if git working tree is dirty\n  if (!isGitStatusClean) {\n    if (program.nonInteractive) {\n      Log.warn(\n        `Git status is dirty but the command will continue because nonInteractive is enabled.`\n      );\n      return false;\n    }\n\n    Log.addNewLineIfNone();\n    const answer = await confirmAsync({\n      message: `Would you like to proceed?`,\n    });\n\n    if (!answer) {\n      return true;\n    }\n\n    Log.newLine();\n  }\n  return false;\n}\n"],"mappings":";;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAEA,MAAMA,kBAAkB,GAAG,IAAAC,iBAAA,EAAQ,oBAAR,EAA8B,KAA9B,CAA3B;;AAEe,eAAeC,yBAAf,GAA6D;EAC1E,IAAIF,kBAAJ,EAAwB;IACtBG,cAAA,CAAIC,IAAJ,CACE,4FADF;;IAGA,OAAO,KAAP;EACD;;EACD,MAAMC,gBAAgB,GAAG,MAAM,IAAAC,sCAAA,GAA/B,CAP0E,CAS1E;;EACA,IAAI,CAACD,gBAAL,EAAuB;IACrB,IAAIE,oBAAA,CAAQC,cAAZ,EAA4B;MAC1BL,cAAA,CAAIC,IAAJ,CACG,sFADH;;MAGA,OAAO,KAAP;IACD;;IAEDD,cAAA,CAAIM,gBAAJ;;IACA,MAAMC,MAAM,GAAG,MAAM,IAAAC,uBAAA,EAAa;MAChCC,OAAO,EAAG;IADsB,CAAb,CAArB;;IAIA,IAAI,CAACF,MAAL,EAAa;MACX,OAAO,IAAP;IACD;;IAEDP,cAAA,CAAIU,OAAJ;EACD;;EACD,OAAO,KAAP;AACD"}