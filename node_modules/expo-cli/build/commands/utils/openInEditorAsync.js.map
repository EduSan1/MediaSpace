{"version":3,"file":"openInEditorAsync.js","names":["guessEditor","editors","defaultEditor","getEditor","openInEditorAsync","path","options","editor","Log","debug","name","binary","id","spawnAsync","error"],"sources":["../../../src/commands/utils/openInEditorAsync.ts"],"sourcesContent":["import spawnAsync from '@expo/spawn-async';\nimport editors from 'env-editor';\n\nimport Log from '../../log';\n\nexport function guessEditor() {\n  try {\n    return editors.defaultEditor();\n  } catch {\n    return editors.getEditor('vscode');\n  }\n}\n\nexport async function openInEditorAsync(\n  path: string,\n  options: { editor?: string } = {}\n): Promise<boolean> {\n  const editor = options.editor ? editors.getEditor(options.editor) : guessEditor();\n\n  Log.debug(`Opening ${path} in ${editor.name} (bin: ${editor.binary}, id: ${editor.id})`);\n  if (editor) {\n    try {\n      await spawnAsync(editor.binary, [path]);\n      return true;\n    } catch {}\n  }\n\n  if (options.editor) {\n    Log.error(\n      `Could not resolve editor from environment variable $EXPO_EDITOR=\"${options.editor}\". Trying again with system default.`\n    );\n    return openInEditorAsync(path, {});\n  }\n\n  Log.error(\n    'Could not open editor, you can set it by defining the $EDITOR environment variable with the binary of your editor. (e.g. \"code\" or \"atom\")'\n  );\n  return false;\n}\n"],"mappings":";;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAEO,SAASA,WAAT,GAAuB;EAC5B,IAAI;IACF,OAAOC,oBAAA,CAAQC,aAAR,EAAP;EACD,CAFD,CAEE,MAAM;IACN,OAAOD,oBAAA,CAAQE,SAAR,CAAkB,QAAlB,CAAP;EACD;AACF;;AAEM,eAAeC,iBAAf,CACLC,IADK,EAELC,OAA4B,GAAG,EAF1B,EAGa;EAClB,MAAMC,MAAM,GAAGD,OAAO,CAACC,MAAR,GAAiBN,oBAAA,CAAQE,SAAR,CAAkBG,OAAO,CAACC,MAA1B,CAAjB,GAAqDP,WAAW,EAA/E;;EAEAQ,cAAA,CAAIC,KAAJ,CAAW,WAAUJ,IAAK,OAAME,MAAM,CAACG,IAAK,UAASH,MAAM,CAACI,MAAO,SAAQJ,MAAM,CAACK,EAAG,GAArF;;EACA,IAAIL,MAAJ,EAAY;IACV,IAAI;MACF,MAAM,IAAAM,qBAAA,EAAWN,MAAM,CAACI,MAAlB,EAA0B,CAACN,IAAD,CAA1B,CAAN;MACA,OAAO,IAAP;IACD,CAHD,CAGE,MAAM,CAAE;EACX;;EAED,IAAIC,OAAO,CAACC,MAAZ,EAAoB;IAClBC,cAAA,CAAIM,KAAJ,CACG,oEAAmER,OAAO,CAACC,MAAO,sCADrF;;IAGA,OAAOH,iBAAiB,CAACC,IAAD,EAAO,EAAP,CAAxB;EACD;;EAEDG,cAAA,CAAIM,KAAJ,CACE,4IADF;;EAGA,OAAO,KAAP;AACD"}