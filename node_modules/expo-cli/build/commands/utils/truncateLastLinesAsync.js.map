{"version":3,"file":"truncateLastLinesAsync.js","names":["truncateLastLinesAsync","filePath","n","lines","size","Promise","all","readLastLines","read","fs","promises","stat","toTruncate","length","truncate"],"sources":["../../../src/commands/utils/truncateLastLinesAsync.ts"],"sourcesContent":["import fs from 'fs';\nimport readLastLines from 'read-last-lines';\n\n// truncate the last n lines in a file\nexport async function truncateLastLinesAsync(filePath: string, n: number) {\n  const [lines, { size }] = await Promise.all([\n    readLastLines.read(filePath, n),\n    fs.promises.stat(filePath),\n  ]);\n  const toTruncate = lines.length;\n  await fs.promises.truncate(filePath, size - toTruncate);\n}\n"],"mappings":";;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAEA;AACO,eAAeA,sBAAf,CAAsCC,QAAtC,EAAwDC,CAAxD,EAAmE;EACxE,MAAM,CAACC,KAAD,EAAQ;IAAEC;EAAF,CAAR,IAAoB,MAAMC,OAAO,CAACC,GAAR,CAAY,CAC1CC,wBAAA,CAAcC,IAAd,CAAmBP,QAAnB,EAA6BC,CAA7B,CAD0C,EAE1CO,aAAA,CAAGC,QAAH,CAAYC,IAAZ,CAAiBV,QAAjB,CAF0C,CAAZ,CAAhC;EAIA,MAAMW,UAAU,GAAGT,KAAK,CAACU,MAAzB;EACA,MAAMJ,aAAA,CAAGC,QAAH,CAAYI,QAAZ,CAAqBb,QAArB,EAA+BG,IAAI,GAAGQ,UAAtC,CAAN;AACD"}