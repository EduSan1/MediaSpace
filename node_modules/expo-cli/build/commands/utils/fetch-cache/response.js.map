{"version":3,"file":"response.js","names":["responseInternalSymbol","Object","getOwnPropertySymbols","Response","NFCResponse","constructor","bodyStream","metaData","ejectFromCache","ejectSelfFromCache","fromCache","serializeMetaFromNodeFetchResponse","res","url","status","statusText","headers","raw","size","timeout","counter"],"sources":["../../../../src/commands/utils/fetch-cache/response.ts"],"sourcesContent":["import { CacheObject } from 'cacache';\nimport { BodyInit, Response, ResponseInit } from 'node-fetch';\n\nconst responseInternalSymbol = Object.getOwnPropertySymbols(new Response())[1];\n\nexport class NFCResponse extends Response {\n  constructor(\n    bodyStream?: BodyInit,\n    metaData?: ResponseInit,\n    public ejectFromCache: () => Promise<[CacheObject, CacheObject]> = function ejectFromCache(\n      this: any\n    ) {\n      return this.ejectSelfFromCache();\n    },\n    public fromCache: boolean = false\n  ) {\n    super(bodyStream, metaData);\n  }\n\n  static serializeMetaFromNodeFetchResponse(res: Response) {\n    const metaData = {\n      url: res.url,\n      status: res.status,\n      statusText: res.statusText,\n      headers: res.headers.raw(),\n      size: res.size,\n      timeout: res.timeout,\n      // @ts-ignore\n      counter: res[responseInternalSymbol].counter,\n    };\n\n    return metaData;\n  }\n}\n"],"mappings":";;;;;;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA,MAAMA,sBAAsB,GAAGC,MAAM,CAACC,qBAAP,CAA6B,KAAIC,qBAAJ,GAA7B,EAA6C,CAA7C,CAA/B;;AAEO,MAAMC,WAAN,SAA0BD,qBAA1B,CAAmC;EACxCE,WAAW,CACTC,UADS,EAETC,QAFS,EAGFC,cAAyD,GAAG,SAASA,cAAT,GAEjE;IACA,OAAO,KAAKC,kBAAL,EAAP;EACD,CAPQ,EAQFC,SAAkB,GAAG,KARnB,EAST;IACA,MAAMJ,UAAN,EAAkBC,QAAlB;IADA,KANOC,cAMP,GANOA,cAMP;IAAA,KADOE,SACP,GADOA,SACP;EAED;;EAEwC,OAAlCC,kCAAkC,CAACC,GAAD,EAAgB;IACvD,MAAML,QAAQ,GAAG;MACfM,GAAG,EAAED,GAAG,CAACC,GADM;MAEfC,MAAM,EAAEF,GAAG,CAACE,MAFG;MAGfC,UAAU,EAAEH,GAAG,CAACG,UAHD;MAIfC,OAAO,EAAEJ,GAAG,CAACI,OAAJ,CAAYC,GAAZ,EAJM;MAKfC,IAAI,EAAEN,GAAG,CAACM,IALK;MAMfC,OAAO,EAAEP,GAAG,CAACO,OANE;MAOf;MACAC,OAAO,EAAER,GAAG,CAACZ,sBAAD,CAAH,CAA4BoB;IARtB,CAAjB;IAWA,OAAOb,QAAP;EACD;;AA3BuC"}