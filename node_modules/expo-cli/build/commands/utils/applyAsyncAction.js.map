{"version":3,"file":"applyAsyncAction.js","names":["applyAsyncActionProjectDir","command","resolve","settings","asyncActionProjectDir","projectRoot","options","mod","profileMethod","actionAsync","applyAsyncAction","asyncAction","args","applyAnyAsyncAction","assert"],"sources":["../../../src/commands/utils/applyAsyncAction.ts"],"sourcesContent":["import assert from 'assert';\nimport type { Command } from 'commander';\n\nimport { profileMethod } from '../utils/profileMethod';\n\nexport function applyAsyncActionProjectDir<Options = Record<string, any>>(\n  command: Command,\n  resolve: () => Promise<{\n    actionAsync: (projectRoot: string, options: Options) => Promise<unknown>;\n  }>,\n  settings?: { checkConfig?: boolean; skipSDKVersionRequirement?: true }\n) {\n  command.asyncActionProjectDir(async (projectRoot: string, options: Options) => {\n    const mod = await resolve();\n    return profileMethod(mod.actionAsync)(projectRoot, options);\n  }, settings);\n}\n\nexport function applyAsyncAction<Args = string[], Options = Record<string, any>>(\n  command: Command,\n  resolve: () => Promise<{ actionAsync: (args: Args, options: Options) => Promise<unknown> }>\n) {\n  command.asyncAction(async (args: Args, options: Options) => {\n    const mod = await resolve();\n    return profileMethod(mod.actionAsync)(args, options);\n  });\n}\n\nexport function applyAnyAsyncAction<Options = Record<string, any>>(\n  command: Command,\n  resolve: () => Promise<{ actionAsync: (options: Options) => Promise<unknown> }>\n) {\n  command.asyncAction(async (options: Options) => {\n    assert(typeof options !== 'string', 'Unexpected string passed to command');\n    const mod = await resolve();\n    return profileMethod(mod.actionAsync)(options);\n  });\n}\n"],"mappings":";;;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAGA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAEO,SAASA,0BAAT,CACLC,OADK,EAELC,OAFK,EAKLC,QALK,EAML;EACAF,OAAO,CAACG,qBAAR,CAA8B,OAAOC,WAAP,EAA4BC,OAA5B,KAAiD;IAC7E,MAAMC,GAAG,GAAG,MAAML,OAAO,EAAzB;IACA,OAAO,IAAAM,8BAAA,EAAcD,GAAG,CAACE,WAAlB,EAA+BJ,WAA/B,EAA4CC,OAA5C,CAAP;EACD,CAHD,EAGGH,QAHH;AAID;;AAEM,SAASO,gBAAT,CACLT,OADK,EAELC,OAFK,EAGL;EACAD,OAAO,CAACU,WAAR,CAAoB,OAAOC,IAAP,EAAmBN,OAAnB,KAAwC;IAC1D,MAAMC,GAAG,GAAG,MAAML,OAAO,EAAzB;IACA,OAAO,IAAAM,8BAAA,EAAcD,GAAG,CAACE,WAAlB,EAA+BG,IAA/B,EAAqCN,OAArC,CAAP;EACD,CAHD;AAID;;AAEM,SAASO,mBAAT,CACLZ,OADK,EAELC,OAFK,EAGL;EACAD,OAAO,CAACU,WAAR,CAAoB,MAAOL,OAAP,IAA4B;IAC9C,IAAAQ,iBAAA,EAAO,OAAOR,OAAP,KAAmB,QAA1B,EAAoC,qCAApC;IACA,MAAMC,GAAG,GAAG,MAAML,OAAO,EAAzB;IACA,OAAO,IAAAM,8BAAA,EAAcD,GAAG,CAACE,WAAlB,EAA+BH,OAA/B,CAAP;EACD,CAJD;AAKD"}