{"version":3,"file":"progress.js","names":["createProgressTracker","_total","bar","transferredSoFar","progress","total","undefined","ProgressBar","complete","incomplete","width","Log","setBundleProgressBar","tick","transferred"],"sources":["../../../src/commands/utils/progress.ts"],"sourcesContent":["import type { Progress } from 'got';\nimport ProgressBar from 'progress';\n\nimport Log from '../../log';\n\ntype ProgressTracker = (progress: Progress) => void;\n\nfunction createProgressTracker(_total?: number): ProgressTracker {\n  let bar: ProgressBar | null = null;\n  let transferredSoFar = 0;\n  return (progress: Progress) => {\n    if (!bar && (progress.total !== undefined || _total !== undefined)) {\n      const total = (_total ?? progress.total) as number;\n      bar = new ProgressBar('[:bar] :percent :etas', {\n        complete: '=',\n        incomplete: ' ',\n        total,\n        width: 64,\n      });\n      Log.setBundleProgressBar(bar);\n    }\n    if (bar) {\n      bar.tick(progress.transferred - transferredSoFar);\n    }\n    transferredSoFar = progress.transferred;\n  };\n}\n\nexport { createProgressTracker };\n"],"mappings":";;;;;;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAIA,SAASA,qBAAT,CAA+BC,MAA/B,EAAiE;EAC/D,IAAIC,GAAuB,GAAG,IAA9B;EACA,IAAIC,gBAAgB,GAAG,CAAvB;EACA,OAAQC,QAAD,IAAwB;IAC7B,IAAI,CAACF,GAAD,KAASE,QAAQ,CAACC,KAAT,KAAmBC,SAAnB,IAAgCL,MAAM,KAAKK,SAApD,CAAJ,EAAoE;MAClE,MAAMD,KAAK,GAAIJ,MAAJ,aAAIA,MAAJ,cAAIA,MAAJ,GAAcG,QAAQ,CAACC,KAAlC;MACAH,GAAG,GAAG,KAAIK,mBAAJ,EAAgB,uBAAhB,EAAyC;QAC7CC,QAAQ,EAAE,GADmC;QAE7CC,UAAU,EAAE,GAFiC;QAG7CJ,KAH6C;QAI7CK,KAAK,EAAE;MAJsC,CAAzC,CAAN;;MAMAC,cAAA,CAAIC,oBAAJ,CAAyBV,GAAzB;IACD;;IACD,IAAIA,GAAJ,EAAS;MACPA,GAAG,CAACW,IAAJ,CAAST,QAAQ,CAACU,WAAT,GAAuBX,gBAAhC;IACD;;IACDA,gBAAgB,GAAGC,QAAQ,CAACU,WAA5B;EACD,CAfD;AAgBD"}