{"version":3,"file":"publishRollbackAsync.js","names":["actionAsync","projectRoot","options","assert","channelId","releaseChannel","sdkVersion","usage","getUsageAsync","CommandError","platform","rollbackPublicationFromChannelAsync"],"sources":["../../../src/commands/publish/publishRollbackAsync.ts"],"sourcesContent":["import assert from 'assert';\n\nimport CommandError from '../../CommandError';\nimport { RollbackOptions, rollbackPublicationFromChannelAsync } from '../utils/PublishUtils';\nimport { getUsageAsync } from './getUsageAsync';\n\ntype Options = {\n  releaseChannel?: string;\n  sdkVersion?: string;\n  platform?: string;\n  channelId?: string;\n};\n\nexport async function actionAsync(projectRoot: string, options: Options) {\n  assert(\n    !options.channelId,\n    '--channel-id flag is deprecated and does not do anything. Please use --release-channel and --sdk-version instead.'\n  );\n\n  if (!options.releaseChannel || !options.sdkVersion) {\n    const usage = await getUsageAsync(projectRoot);\n    throw new CommandError(usage);\n  }\n  if (options.platform) {\n    if (options.platform !== 'android' && options.platform !== 'ios') {\n      throw new CommandError(\n        'Platform must be either android or ios. Leave out the platform flag to target both platforms.'\n      );\n    }\n  }\n  await rollbackPublicationFromChannelAsync(projectRoot, options as RollbackOptions);\n}\n"],"mappings":";;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AASO,eAAeA,WAAf,CAA2BC,WAA3B,EAAgDC,OAAhD,EAAkE;EACvE,IAAAC,iBAAA,EACE,CAACD,OAAO,CAACE,SADX,EAEE,mHAFF;;EAKA,IAAI,CAACF,OAAO,CAACG,cAAT,IAA2B,CAACH,OAAO,CAACI,UAAxC,EAAoD;IAClD,MAAMC,KAAK,GAAG,MAAM,IAAAC,8BAAA,EAAcP,WAAd,CAApB;IACA,MAAM,KAAIQ,uBAAJ,EAAiBF,KAAjB,CAAN;EACD;;EACD,IAAIL,OAAO,CAACQ,QAAZ,EAAsB;IACpB,IAAIR,OAAO,CAACQ,QAAR,KAAqB,SAArB,IAAkCR,OAAO,CAACQ,QAAR,KAAqB,KAA3D,EAAkE;MAChE,MAAM,KAAID,uBAAJ,EACJ,+FADI,CAAN;IAGD;EACF;;EACD,MAAM,IAAAE,mDAAA,EAAoCV,WAApC,EAAiDC,OAAjD,CAAN;AACD"}