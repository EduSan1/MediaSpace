{"version":3,"file":"prebuildAsync.js","names":["actionAsync","projectRoot","platform","clean","skipDependencyUpdate","options","warnAboutLocalCLI","localCmd","npm","packageManager","platforms","platformsFromPlatform","maybeBailOnGitStatusAsync","clearNativeFolder","promptToClearMalformedNativeProjectsAsync","prebuildAsync","split"],"sources":["../../../src/commands/eject/prebuildAsync.ts"],"sourcesContent":["import { warnAboutLocalCLI } from '../../utils/migration';\nimport maybeBailOnGitStatusAsync from '../utils/maybeBailOnGitStatusAsync';\nimport { clearNativeFolder, promptToClearMalformedNativeProjectsAsync } from './clearNativeFolder';\nimport { platformsFromPlatform } from './platformOptions';\nimport { EjectAsyncOptions, prebuildAsync } from './prebuildAppAsync';\n\nexport async function actionAsync(\n  projectRoot: string,\n  {\n    platform,\n    clean,\n    skipDependencyUpdate,\n    ...options\n  }: EjectAsyncOptions & {\n    npm?: boolean;\n    platform?: string;\n    clean?: boolean;\n    skipDependencyUpdate?: string;\n  }\n) {\n  warnAboutLocalCLI(projectRoot, { localCmd: 'prebuild' });\n\n  if (options.npm) {\n    options.packageManager = 'npm';\n  }\n\n  const platforms = platformsFromPlatform(platform);\n\n  if (clean) {\n    if (await maybeBailOnGitStatusAsync()) return;\n    // Clear the native folders before syncing\n    await clearNativeFolder(projectRoot, platforms);\n  } else {\n    await promptToClearMalformedNativeProjectsAsync(projectRoot, platforms);\n  }\n\n  await prebuildAsync(projectRoot, {\n    ...options,\n    skipDependencyUpdate: skipDependencyUpdate ? skipDependencyUpdate.split(',') : [],\n    platforms,\n  } as EjectAsyncOptions);\n}\n"],"mappings":";;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAEO,eAAeA,WAAf,CACLC,WADK,EAEL;EACEC,QADF;EAEEC,KAFF;EAGEC,oBAHF;EAIE,GAAGC;AAJL,CAFK,EAaL;EACA,IAAAC,8BAAA,EAAkBL,WAAlB,EAA+B;IAAEM,QAAQ,EAAE;EAAZ,CAA/B;;EAEA,IAAIF,OAAO,CAACG,GAAZ,EAAiB;IACfH,OAAO,CAACI,cAAR,GAAyB,KAAzB;EACD;;EAED,MAAMC,SAAS,GAAG,IAAAC,wCAAA,EAAsBT,QAAtB,CAAlB;;EAEA,IAAIC,KAAJ,EAAW;IACT,IAAI,MAAM,IAAAS,oCAAA,GAAV,EAAuC,OAD9B,CAET;;IACA,MAAM,IAAAC,sCAAA,EAAkBZ,WAAlB,EAA+BS,SAA/B,CAAN;EACD,CAJD,MAIO;IACL,MAAM,IAAAI,8DAAA,EAA0Cb,WAA1C,EAAuDS,SAAvD,CAAN;EACD;;EAED,MAAM,IAAAK,iCAAA,EAAcd,WAAd,EAA2B,EAC/B,GAAGI,OAD4B;IAE/BD,oBAAoB,EAAEA,oBAAoB,GAAGA,oBAAoB,CAACY,KAArB,CAA2B,GAA3B,CAAH,GAAqC,EAFhD;IAG/BN;EAH+B,CAA3B,CAAN;AAKD"}