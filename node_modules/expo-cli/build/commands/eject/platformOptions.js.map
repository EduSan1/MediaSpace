{"version":3,"file":"platformOptions.js","names":["platformsFromPlatform","platform","loose","process","Log","warn","CommandError","ensureValidPlatforms","platforms","isWindows","includes","chalk","bold","newLine","filter","assertPlatforms","length"],"sources":["../../../src/commands/eject/platformOptions.ts"],"sourcesContent":["import { ModPlatform } from '@expo/config-plugins';\nimport chalk from 'chalk';\n\nimport CommandError from '../../CommandError';\nimport Log from '../../log';\n\nexport function platformsFromPlatform(\n  platform: string = 'all',\n  { loose }: { loose?: boolean } = {}\n): ModPlatform[] {\n  switch (platform) {\n    case 'ios':\n      if (process.platform === 'win32' && !loose) {\n        Log.warn('Ejecting is unsupported locally on windows, use eas build instead');\n        // continue anyways :shrug:\n      }\n      return ['ios'];\n    case 'android':\n      return ['android'];\n    case 'all':\n      if (loose || process.platform !== 'win32') {\n        return ['android', 'ios'];\n      }\n      return ['android'];\n    default:\n      throw new CommandError(`Unsupported platform \"${platform}\". Options are: ios, android, all`);\n  }\n}\n\nexport function ensureValidPlatforms(platforms: ModPlatform[]): ModPlatform[] {\n  const isWindows = process.platform === 'win32';\n  // Skip ejecting for iOS on Windows\n  if (isWindows && platforms.includes('ios')) {\n    Log.warn(\n      `⚠️  Skipping generating the iOS native project files. Run ${chalk.bold(\n        'expo eject'\n      )} again from macOS or Linux to generate the iOS project.`\n    );\n    Log.newLine();\n    return platforms.filter(platform => platform !== 'ios');\n  }\n  return platforms;\n}\n\nexport function assertPlatforms(platforms: ModPlatform[]) {\n  if (!platforms?.length) {\n    throw new CommandError('At least one platform must be enabled when syncing');\n  }\n}\n"],"mappings":";;;;;;;;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAEO,SAASA,qBAAT,CACLC,QAAgB,GAAG,KADd,EAEL;EAAEC;AAAF,IAAiC,EAF5B,EAGU;EACf,QAAQD,QAAR;IACE,KAAK,KAAL;MACE,IAAIE,OAAO,CAACF,QAAR,KAAqB,OAArB,IAAgC,CAACC,KAArC,EAA4C;QAC1CE,cAAA,CAAIC,IAAJ,CAAS,mEAAT,EAD0C,CAE1C;;MACD;;MACD,OAAO,CAAC,KAAD,CAAP;;IACF,KAAK,SAAL;MACE,OAAO,CAAC,SAAD,CAAP;;IACF,KAAK,KAAL;MACE,IAAIH,KAAK,IAAIC,OAAO,CAACF,QAAR,KAAqB,OAAlC,EAA2C;QACzC,OAAO,CAAC,SAAD,EAAY,KAAZ,CAAP;MACD;;MACD,OAAO,CAAC,SAAD,CAAP;;IACF;MACE,MAAM,KAAIK,uBAAJ,EAAkB,yBAAwBL,QAAS,mCAAnD,CAAN;EAfJ;AAiBD;;AAEM,SAASM,oBAAT,CAA8BC,SAA9B,EAAuE;EAC5E,MAAMC,SAAS,GAAGN,OAAO,CAACF,QAAR,KAAqB,OAAvC,CAD4E,CAE5E;;EACA,IAAIQ,SAAS,IAAID,SAAS,CAACE,QAAV,CAAmB,KAAnB,CAAjB,EAA4C;IAC1CN,cAAA,CAAIC,IAAJ,CACG,6DAA4DM,gBAAA,CAAMC,IAAN,CAC3D,YAD2D,CAE3D,yDAHJ;;IAKAR,cAAA,CAAIS,OAAJ;;IACA,OAAOL,SAAS,CAACM,MAAV,CAAiBb,QAAQ,IAAIA,QAAQ,KAAK,KAA1C,CAAP;EACD;;EACD,OAAOO,SAAP;AACD;;AAEM,SAASO,eAAT,CAAyBP,SAAzB,EAAmD;EACxD,IAAI,EAACA,SAAD,aAACA,SAAD,eAACA,SAAS,CAAEQ,MAAZ,CAAJ,EAAwB;IACtB,MAAM,KAAIV,uBAAJ,EAAiB,oDAAjB,CAAN;EACD;AACF"}