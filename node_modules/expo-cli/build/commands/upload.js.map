{"version":3,"file":"upload.js","names":["logMigration","platform","Log","newLine","log","chalk","bold","dim","TerminalLink","learnMore","cyan","linkedText","program","migrateToEasJsonProperty","named","migrateToEasCliArg","cmd","applyAsyncActionProjectDir","command","alias","description","yellow","helpGroup","option","actionAsync"],"sources":["../../src/commands/upload.ts"],"sourcesContent":["import chalk from 'chalk';\nimport type { Command } from 'commander';\n\nimport Log from '../log';\nimport * as TerminalLink from './utils/TerminalLink';\nimport { applyAsyncActionProjectDir } from './utils/applyAsyncAction';\n\nfunction logMigration(platform: string) {\n  Log.newLine();\n  Log.log(\n    `${chalk.bold(\n      `expo upload:${platform}`\n    )} has been superseded by ${chalk.bold`eas submit`}. ${chalk.dim(\n      TerminalLink.learnMore(`https://expo.fyi/expo-upload-${platform}`)\n    )}`\n  );\n  Log.newLine();\n  Log.log('Run the following:');\n  Log.newLine();\n  Log.log('\\u203A ' + chalk.cyan.bold('npm install -g eas-cli'));\n  Log.log(\n    `\\u203A ${TerminalLink.linkedText(\n      chalk.cyan.bold(`eas submit -p ${platform}`),\n      `https://docs.expo.dev/submit/${platform}`\n    )}`\n  );\n  Log.newLine();\n}\n\n// TODO: Drop this entire command category in mid to late 2022\nexport default function (program: Command) {\n  const migrateToEasJsonProperty = (named: string) =>\n    `Migrate to ${chalk.bold`eas.json`}'s ${chalk.bold(named)} property`;\n  const migrateToEasCliArg = (cmd: string) => `Migrate to ${chalk.bold(`eas submit ${cmd}`)}`;\n\n  applyAsyncActionProjectDir(\n    program\n      .command('upload:android [path]')\n      .alias('ua')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas submit`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option('--verbose', migrateToEasCliArg('--verbose'))\n      .option('--latest', migrateToEasCliArg('--latest'))\n      .option('--id <id>', migrateToEasCliArg('--id <id>'))\n      .option('--path [path]', migrateToEasCliArg('--path <path>'))\n      .option('--url <url>', migrateToEasCliArg('--url <url>'))\n      .option(\n        '--android-package <android-package>',\n        `Migrate to ${chalk.bold`eas submit`} (android-package is auto inferred)`\n      )\n      .option(\n        '--type <archive-type>',\n        `Migrate to ${chalk.bold`eas submit`} (type is auto inferred)`\n      )\n      .option('--key <key>', migrateToEasJsonProperty('serviceAccountKeyPath'))\n      .option('--track <track>', migrateToEasJsonProperty('track'))\n      .option('--release-status <release-status>', migrateToEasJsonProperty('releaseStatus')),\n    async () => ({\n      async actionAsync() {\n        logMigration('android');\n      },\n    })\n  );\n\n  applyAsyncActionProjectDir(\n    program\n      .command('upload:ios [path]')\n      .alias('ui')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas submit`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option('--verbose', migrateToEasCliArg('--verbose'))\n      .option('--latest', migrateToEasCliArg('--latest'))\n      .option('--id <id>', migrateToEasCliArg('--id <id>'))\n      .option('--path [path]', migrateToEasCliArg('--path <path>'))\n      .option('--url <url>', migrateToEasCliArg('--url <url>'))\n      .option('--apple-id <apple-id>', migrateToEasJsonProperty('appleId'))\n      .option('--itc-team-id <itc-team-id>', migrateToEasJsonProperty('appleTeamId'))\n      .option('--app-name <app-name>', migrateToEasJsonProperty('appName'))\n      .option('--company-name <company-name>', migrateToEasJsonProperty('companyName'))\n      .option('--sku <sku>', migrateToEasJsonProperty('sku'))\n      .option('--language <language>', migrateToEasJsonProperty('language')),\n    async () => ({\n      async actionAsync() {\n        logMigration('ios');\n      },\n    })\n  );\n}\n"],"mappings":"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"}