{"version":3,"file":"startBundlerAsync.js","names":["setGlobalDevClientSettingsAsync","projectRoot","devClient","scheme","getOptionalDevClientSchemeAsync","catch","ProjectSettings","setAsync","startBundlerAsync","metroPort","platforms","installExitHooks","Project","startAsync","TerminalUI","isWebSocketsEnabled","isRemoteReloadingEnabled"],"sources":["../../../../src/commands/run/ios/startBundlerAsync.ts"],"sourcesContent":["import { Project, ProjectSettings } from 'xdl';\n\nimport * as TerminalUI from '../../start/TerminalUI';\nimport { installExitHooks } from '../../start/installExitHooks';\nimport { getOptionalDevClientSchemeAsync } from '../utils/schemes';\n\nexport async function setGlobalDevClientSettingsAsync(projectRoot: string) {\n  const devClient = true;\n  const scheme = await getOptionalDevClientSchemeAsync(projectRoot).catch(() => null);\n  await ProjectSettings.setAsync(projectRoot, {\n    devClient,\n    scheme,\n  });\n}\n\nexport async function startBundlerAsync(\n  projectRoot: string,\n  { metroPort, platforms }: Pick<Project.StartOptions, 'metroPort' | 'platforms'>\n) {\n  // Add clean up hooks\n  installExitHooks(projectRoot);\n  // This basically means don't use the Client app.\n  const devClient = true;\n  await Project.startAsync(projectRoot, { devClient, metroPort });\n  await TerminalUI.startAsync(projectRoot, {\n    devClient,\n    // Enable controls\n    isWebSocketsEnabled: true,\n    isRemoteReloadingEnabled: true,\n    platforms,\n  });\n}\n"],"mappings":";;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;;;AAEO,eAAeA,+BAAf,CAA+CC,WAA/C,EAAoE;EACzE,MAAMC,SAAS,GAAG,IAAlB;EACA,MAAMC,MAAM,GAAG,MAAM,IAAAC,0CAAA,EAAgCH,WAAhC,EAA6CI,KAA7C,CAAmD,MAAM,IAAzD,CAArB;EACA,MAAMC,sBAAA,CAAgBC,QAAhB,CAAyBN,WAAzB,EAAsC;IAC1CC,SAD0C;IAE1CC;EAF0C,CAAtC,CAAN;AAID;;AAEM,eAAeK,iBAAf,CACLP,WADK,EAEL;EAAEQ,SAAF;EAAaC;AAAb,CAFK,EAGL;EACA;EACA,IAAAC,oCAAA,EAAiBV,WAAjB,EAFA,CAGA;;EACA,MAAMC,SAAS,GAAG,IAAlB;EACA,MAAMU,cAAA,CAAQC,UAAR,CAAmBZ,WAAnB,EAAgC;IAAEC,SAAF;IAAaO;EAAb,CAAhC,CAAN;EACA,MAAMK,UAAU,GAACD,UAAX,CAAsBZ,WAAtB,EAAmC;IACvCC,SADuC;IAEvC;IACAa,mBAAmB,EAAE,IAHkB;IAIvCC,wBAAwB,EAAE,IAJa;IAKvCN;EALuC,CAAnC,CAAN;AAOD"}