{"version":3,"file":"webhooksUpdateAsync.js","names":["actionAsync","projectRoot","id","url","event","options","assert","secret","validateSecret","project","client","setupAsync","webhook","getAsync","spinner","ora","start","patchAsync","succeed"],"sources":["../../../src/commands/webhooks/webhooksUpdateAsync.ts"],"sourcesContent":["import assert from 'assert';\n\nimport { ora } from '../../utils/ora';\nimport { setupAsync, validateSecret, WebhookEvent } from './utils';\n\ntype Options = {\n  id?: string;\n  url?: string;\n  event?: WebhookEvent;\n  secret?: string;\n};\n\nexport async function actionAsync(projectRoot: string, { id, url, event, ...options }: Options) {\n  assert(typeof id === 'string', '--id must be a webhook ID');\n  assert(event == null || typeof event === 'string', '--event: string is required');\n  let secret = validateSecret(options);\n\n  const { project, client } = await setupAsync(projectRoot);\n\n  const webhook = await client.getAsync(`projects/${project.id}/webhooks/${id}`);\n  event = event ?? webhook.event;\n  secret = secret ?? webhook.secret;\n\n  const spinner = ora(`Updating webhook ${id}`).start();\n  await client.patchAsync(`projects/${project.id}/webhooks/${id}`, { url, event, secret });\n  spinner.succeed();\n}\n"],"mappings":";;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AASO,eAAeA,WAAf,CAA2BC,WAA3B,EAAgD;EAAEC,EAAF;EAAMC,GAAN;EAAWC,KAAX;EAAkB,GAAGC;AAArB,CAAhD,EAAyF;EAAA;;EAC9F,IAAAC,iBAAA,EAAO,OAAOJ,EAAP,KAAc,QAArB,EAA+B,2BAA/B;EACA,IAAAI,iBAAA,EAAOF,KAAK,IAAI,IAAT,IAAiB,OAAOA,KAAP,KAAiB,QAAzC,EAAmD,6BAAnD;EACA,IAAIG,MAAM,GAAG,IAAAC,uBAAA,EAAeH,OAAf,CAAb;EAEA,MAAM;IAAEI,OAAF;IAAWC;EAAX,IAAsB,MAAM,IAAAC,mBAAA,EAAWV,WAAX,CAAlC;EAEA,MAAMW,OAAO,GAAG,MAAMF,MAAM,CAACG,QAAP,CAAiB,YAAWJ,OAAO,CAACP,EAAG,aAAYA,EAAG,EAAtD,CAAtB;EACAE,KAAK,aAAGA,KAAH,2CAAYQ,OAAO,CAACR,KAAzB;EACAG,MAAM,cAAGA,MAAH,6CAAaK,OAAO,CAACL,MAA3B;EAEA,MAAMO,OAAO,GAAG,IAAAC,UAAA,EAAK,oBAAmBb,EAAG,EAA3B,EAA8Bc,KAA9B,EAAhB;EACA,MAAMN,MAAM,CAACO,UAAP,CAAmB,YAAWR,OAAO,CAACP,EAAG,aAAYA,EAAG,EAAxD,EAA2D;IAAEC,GAAF;IAAOC,KAAP;IAAcG;EAAd,CAA3D,CAAN;EACAO,OAAO,CAACI,OAAR;AACD"}