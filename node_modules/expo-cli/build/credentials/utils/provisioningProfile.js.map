{"version":3,"file":"provisioningProfile.js","names":["readAppleTeam","dataBase64","profilePlist","parse","teamId","teamName","Error","readProfileName","buffer","Buffer","from","profile","toString","plist"],"sources":["../../../src/credentials/utils/provisioningProfile.ts"],"sourcesContent":["import plist, { PlistArray, PlistObject } from '@expo/plist';\n\ninterface AppleTeam {\n  teamId: string;\n  teamName: string;\n}\n\nfunction readAppleTeam(dataBase64: string): AppleTeam {\n  const profilePlist = parse(dataBase64);\n  const teamId = (profilePlist['TeamIdentifier'] as PlistArray)?.[0] as string;\n  const teamName = profilePlist['TeamName'] as string;\n  if (!teamId) {\n    throw new Error('Team identifier is missing from provisoning profile');\n  }\n  return { teamId, teamName };\n}\n\nfunction readProfileName(dataBase64: string): string {\n  const profilePlist = parse(dataBase64);\n  return profilePlist['Name'] as string;\n}\n\nfunction parse(dataBase64: string): PlistObject {\n  try {\n    const buffer = Buffer.from(dataBase64, 'base64');\n    const profile = buffer.toString('utf-8');\n    return plist.parse(profile) as PlistObject;\n  } catch {\n    throw new Error('Provisioning profile is malformed');\n  }\n}\n\nexport { readAppleTeam, readProfileName };\n"],"mappings":";;;;;;;;AAAA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;;;AAOA,SAASA,aAAT,CAAuBC,UAAvB,EAAsD;EAAA;;EACpD,MAAMC,YAAY,GAAGC,KAAK,CAACF,UAAD,CAA1B;EACA,MAAMG,MAAM,4BAAIF,YAAY,CAAC,gBAAD,CAAhB,0DAAG,sBAAiD,CAAjD,CAAf;EACA,MAAMG,QAAQ,GAAGH,YAAY,CAAC,UAAD,CAA7B;;EACA,IAAI,CAACE,MAAL,EAAa;IACX,MAAM,IAAIE,KAAJ,CAAU,qDAAV,CAAN;EACD;;EACD,OAAO;IAAEF,MAAF;IAAUC;EAAV,CAAP;AACD;;AAED,SAASE,eAAT,CAAyBN,UAAzB,EAAqD;EACnD,MAAMC,YAAY,GAAGC,KAAK,CAACF,UAAD,CAA1B;EACA,OAAOC,YAAY,CAAC,MAAD,CAAnB;AACD;;AAED,SAASC,KAAT,CAAeF,UAAf,EAAgD;EAC9C,IAAI;IACF,MAAMO,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAYT,UAAZ,EAAwB,QAAxB,CAAf;IACA,MAAMU,OAAO,GAAGH,MAAM,CAACI,QAAP,CAAgB,OAAhB,CAAhB;IACA,OAAOC,gBAAA,CAAMV,KAAN,CAAYQ,OAAZ,CAAP;EACD,CAJD,CAIE,MAAM;IACN,MAAM,IAAIL,KAAJ,CAAU,mCAAV,CAAN;EACD;AACF"}